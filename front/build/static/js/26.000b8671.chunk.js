(this.webpackJsonpapibase=this.webpackJsonpapibase||[]).push([[26],{498:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),o=a.n(c),i=a(10),l=a(11),u=a(113),d=a.n(u),s=a(77),m=a(21),p=a(259),f=a(79),b=a(540),E=a(42),I=a.n(E),g=a(41),v=a.n(g),h=a(23),O=a(15),j=a(13),x=a(12),y=a(96),S=a(88),N=a(17),k=a(548),w=a(28),C=a(9),M=a(19),T=function(e){var t,a=e.accesos,c=e.dataInicial,u=e.abrirModal,d=e.setAbrirModal,s=e.catRegiones,p=e.GetSedes,f=Object(M.a)(c),b=Object(l.a)(f,2),E=b[0],I=b[1],g=Object(n.useState)(!1),v=Object(l.a)(g,2),h=v[0],O=v[1],y=Object(n.useState)([]),S=Object(l.a)(y,2),T=S[0],_=S[1],D=Object(n.useState)([]),A=Object(l.a)(D,2),F=A[0],z=A[1],G=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)("sedediaco",{method:"POST",body:JSON.stringify(E)});case 2:e.sent&&(Object(x.b)("Sede registrada exitosamente"),p(),d(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.find((function(e){return 9===e.menuId&&3===e.accesoId}))){e.next=5;break}return e.next=3,Object(j.a)("departamento?include=0&regionId=".concat(t));case 3:n=e.sent,_(n||[{departamentoId:"",descripcion:"NO ESTA AUTORIZADO"}]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.find((function(e){return 10===e.menuId&&3===e.accesoId}))){e.next=5;break}return e.next=3,Object(j.a)("municipio?include=0&departamentoId=".concat(t));case 3:(n=e.sent)&&z(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)("sedediaco",{method:"PUT",body:JSON.stringify(E)});case 2:(t=e.sent)&&(Object(x.b)(t),p()),d(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),O(!0),!(c.sede_diacoId>0)){e.next=7;break}return e.next=5,q();case 5:e.next=9;break;case 7:return e.next=9,G();case 9:O(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){(null===E||void 0===E?void 0:E.regionId)>0&&L(E.regionId)}),[E.regionId]),Object(n.useEffect)((function(){(null===E||void 0===E?void 0:E.regionId)>0&&(L(E.regionId),z([]))}),[E.regionId]),Object(n.useEffect)((function(){(null===E||void 0===E?void 0:E.departamentoId)>0&&R(E.departamentoId)}),[E.departamentoId]);var P="Campo obligatorio";return r.a.createElement(k.a,{show:u,onHide:function(){return d(!1)},size:"xl"},!0===h?r.a.createElement(N.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,{as:"h5"},c.sede_diacoId>0?"Actualizar Sede":"Nueva Sede")),r.a.createElement(k.a.Body,null,r.a.createElement(C.ValidationForm,{onSubmit:B,onErrorSubmit:function(e,t,a){Object(x.c)("Por favor complete toda la informaci\xf3n solicitada por el formulario")}},r.a.createElement(w.a.Row,null,r.a.createElement(w.a.Group,{as:m.a,md:"6"},r.a.createElement(w.a.Label,{htmlFor:"codigo"},"C\xf3digo Interno"),r.a.createElement(C.TextInput,{name:"codigo",id:"codigo",required:!0,value:E.codigo,onChange:I,errorMessage:P,style:{textTransform:"capitalize"},placeholder:"C\xf3digo Interno",autoComplete:"off",type:"text"})),r.a.createElement(w.a.Group,{as:m.a,md:"6"},r.a.createElement(w.a.Label,{htmlFor:"nombre"},"Nombre"),r.a.createElement(C.TextInput,{name:"nombre",id:"nombre",required:!0,value:E.nombre,onChange:I,errorMessage:P,style:{textTransform:"capitalize"},placeholder:"Nombre",autoComplete:"off",type:"text"})),r.a.createElement(w.a.Group,{as:m.a,md:"12"},r.a.createElement(w.a.Label,{htmlFor:"descripcion"},"Descripci\xf3n"),r.a.createElement(C.TextInput,{name:"descripcion",id:"descripcion",required:!0,multiline:!0,value:null!==(t=E.descripcion)&&void 0!==t?t:"",onChange:I,errorMessage:P,placeholder:"Descripci\xf3n",autoComplete:"off",rows:"3",minLength:"5",style:{textTransform:"capitalize"}})),r.a.createElement(w.a.Group,{as:m.a,md:"6"},r.a.createElement(w.a.Label,{htmlFor:"regionId"},"Region"),r.a.createElement(C.SelectGroup,{name:"regionId",id:"regionId",required:!0,value:E.regionId,onChange:I,errorMessage:P},r.a.createElement("option",{value:""},"Seleccione una Regi\xf3n"),s.map((function(e){var t=e.regionId,a=e.descripcion;return r.a.createElement("option",{value:t,key:t},a)})))),r.a.createElement(w.a.Group,{as:m.a,md:"6"},r.a.createElement(w.a.Label,{htmlFor:"departamentoId"},"Departamento"),r.a.createElement(C.SelectGroup,{name:"departamentoId",id:"departamentoId",required:!0,value:E.departamentoId,onChange:I,errorMessage:P},r.a.createElement("option",{value:""},"Seleccione un Departamento"),T.map((function(e){var t=e.departamentoId,a=e.descripcion;return r.a.createElement("option",{value:t,key:"".concat(t,"_depto")},a)})))),r.a.createElement(w.a.Group,{as:m.a,md:"6"},r.a.createElement(w.a.Label,{htmlFor:"municipioId"},"Municipio"),r.a.createElement(C.SelectGroup,{name:"municipioId",id:"municipioId",required:!0,value:E.municipioId,onChange:I,errorMessage:P},r.a.createElement("option",{value:""},"Seleccione un Municipio"),F.map((function(e){var t=e.municipioId,a=e.descripcion;return r.a.createElement("option",{value:t,key:"".concat(t,"_muns")},a)})))),c.sede_diacoId>0&&r.a.createElement(w.a.Group,{as:m.a,md:"6"},r.a.createElement(w.a.Label,{htmlFor:"estadoId"},"Estado"),r.a.createElement(C.SelectGroup,{name:"estadoId",id:"estadoId",value:E.estadoId,required:!0,errorMessage:P,onChange:I},r.a.createElement("option",{value:""},"Seleccione un estado"),r.a.createElement("option",{value:"1"},"Activo"),r.a.createElement("option",{value:"2"},"Inactivo")))),r.a.createElement(w.a.Row,null,r.a.createElement("div",{className:"col-sm-3"}),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("button",{type:"button",onClick:function(){d(!1)},className:"btn btn-warning"}," Cancelar")),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("button",{type:"submit",className:"btn btn-success"}," ",c.sede_diacoId>0?"Actualizar":"Registrar")))))))},_=function(){var e=Object(h.d)((function(e){return e})),t=Object(n.useState)(!0),a=Object(l.a)(t,2),c=a[0],u=a[1],E=Object(n.useState)([]),g=Object(l.a)(E,2),k=g[0],w=g[1],C=Object(n.useState)(!1),M=Object(l.a)(C,2),_=M[0],D=M[1],A=Object(n.useState)([]),F=Object(l.a)(A,2),z=F[0],G=F[1],L=Object(n.useState)([]),R=Object(l.a)(L,2),q=R[0],B=R[1],P={codigo:"",nombre:"",municipioId:"",descripcion:"",departamentoId:"",regionId:"",estadoId:1},H=Object(n.useState)(P),J=Object(l.a)(H,2),U=J[0],Y=J[1],V=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.find((function(e){return 29===e.menuId&&3===e.accesoId}))){e.next=9;break}return Object(y.b)("#mytable"),u(!0),e.next=5,Object(j.a)("sedediaco?estadoId=1;2");case 5:(t=e.sent)&&B(t),u(!1),Object(y.a)("#mytable");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.find((function(e){return 8===e.menuId&&3===e.accesoId}))){e.next=7;break}return e.next=3,Object(j.a)("region?include=0?estadoId=1");case 3:(t=e.sent)&&G(t),e.next=8;break;case 7:G([{regionId:"",descripcion:"No esta autorizado"}]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){if(null===e||void 0===e?void 0:e.accesos){var t=e.accesos.filter((function(e){return 29===e.menuId||8===e.menuId||9===e.menuId||10===e.menuId}));w(t)}u(!1)}()}),[]),Object(n.useEffect)((function(){V(),W()}),[k]),r.a.createElement(O.a,null,r.a.createElement(s.a,{className:"btn-page"},r.a.createElement(m.a,{sm:12},r.a.createElement(p.a,null,r.a.createElement(p.a.Header,null,r.a.createElement(p.a.Title,{as:"h5"},"Listado de Sedes Diaco")),r.a.createElement(p.a.Body,null,!0===c?r.a.createElement(N.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{className:"align-items-center m-l-0"},r.a.createElement(m.a,null),r.a.createElement(m.a,{className:"text-right"},k.find((function(e){return 29===e.menuId&&1===e.accesoId}))&&r.a.createElement(f.a,{variant:"success",className:"btn-sm btn-round has-ripple",onClick:function(){D(!0),Y(P)}},r.a.createElement("i",{className:"feather icon-plus"})," Agregar Sede"))),k.find((function(e){return 29===e.menuId&&3===e.accesoId}))?r.a.createElement(b.a,{striped:!0,hover:!0,responsive:!0,bordered:!0,id:"mytable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",null,"C\xf3digo Interno"),r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Descripcion"),r.a.createElement("th",null,"Region"),r.a.createElement("th",null,"Departamento"),r.a.createElement("th",null,"Municipio"),r.a.createElement("th",null,"Fecha Ingreso"),r.a.createElement("th",null,"Estado"),k.find((function(e){return 29===e.menuId&&2===e.accesoId||29===e.menuId&&4===e.accesoId}))&&r.a.createElement("th",null))),r.a.createElement("tbody",null,q.map((function(e){var t=e.sede_diacoId,a=e.codigo,n=e.nombre,c=e.descripcion,l=e.fecha_crea,u=e.Municipio,s=e.Estado.descripcion,m=u.descripcion,p=u.Departamento,f=p.descripcion,b=p.Region.descripcion;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t),r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,c),r.a.createElement("td",null,b),r.a.createElement("td",null,f),r.a.createElement("td",null,m),r.a.createElement("td",null,d()(l).format("DD/MM/YYYY")),r.a.createElement("td",null,s),k.find((function(e){return 29===e.menuId&&2===e.accesoId||29===e.menuId&&4===e.accesoId}))&&r.a.createElement("td",{style:{textAlign:"center"}},k.find((function(e){return 29===e.menuId&&2===e.accesoId}))&&r.a.createElement("button",{className:"btn-icon btn btn-info btn-sm",onClick:function(){!function(e){var t=q.find((function(t){return t.sede_diacoId===e})),a=t.sede_diacoId,n=t.codigo,r=t.nombre,c=t.municipioId,o=t.descripcion,i=t.estadoId,l=t.Municipio.Departamento,u=l.departamentoId,d=l.regionId;Y({sede_diacoId:a,codigo:n,nombre:r,municipioId:c,departamentoId:u,regionId:d,descripcion:o,estadoId:i}),D(!0)}(t)}},r.a.createElement("i",{className:"feather icon-edit"})),k.find((function(e){return 29===e.menuId&&4===e.accesoId}))&&r.a.createElement("button",{className:"btn-icon btn btn-danger btn-sm",onClick:function(){var e;e=t,v()(I.a).fire({title:"Alerta?",text:"Esta seguro que desea eliminar el elemento",type:"warning",showCloseButton:!0,showCancelButton:!0}).then(function(){var t=Object(i.a)(o.a.mark((function t(a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.value){t.next=8;break}return t.next=4,Object(j.a)("sedediaco/".concat(e),{method:"DELETE"});case 4:(n=t.sent)&&(Object(x.b)(n),Object(y.b)("#mytable"),r=q.filter((function(t){return t.sede_diacoId!==e})),B(r),Object(y.a)("#mytable")),t.next=9;break;case 8:Object(x.c)("No se elimin\xf3 ning\xfan elemento");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},r.a.createElement("i",{className:"feather icon-trash-2"}))))})))):r.a.createElement(S.a,null)),!0===_&&r.a.createElement(T,{abrirModal:_,setAbrirModal:D,catRegiones:z,GetSedes:V,dataInicial:U,accesos:k}))))))};t.default=function(){return r.a.createElement(_,null)}},88:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),r=a.n(n),c=a(77),o=a(21),i=a(539),l=a(15),u=function(){return r.a.createElement(l.a,null,r.a.createElement(c.a,null,r.a.createElement(o.a,null,r.a.createElement(i.a,{variant:"danger"},r.a.createElement(i.a.Heading,{as:"h4"},"Informaci\xf3n!"),r.a.createElement("p",null,"No esta autorizado para poder visualizar los elementos"),r.a.createElement("hr",null),r.a.createElement("p",{className:"mb-0"},"Comuniquese con el administrador para la asignaci\xf3n de permisos")))))}},96:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o}));var n=a(99),r=a.n(n);r.a.DataTable=a(102),a(104);var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;r()(e).DataTable({searching:!0,bLengthChange:!1,bAutoWidth:!1,lengthMenu:[[10,25,50,-1],[10,25,50,"Todos"]],displayLength:t,language:{processing:"Cargando informaci\xf3n",search:"Filtrar por:",lengthMenu:"Mostrar _MENU_ filas",info:"Vizualizaci\xf3n  _END_ de _TOTAL_ filas",infoEmpty:"Vizualizaci\xf3n del elemento 0 a 0 de 0 filas",infoFiltered:"(Filtrado de _MAX_ filas en total)",infoPostFix:"",loadingRecords:"Cargando...",zeroRecords:"No se logr\xf3 encontrar ninguna coincidencia",emptyTable:"No existen registros",paginate:{first:"Primera",previous:"Anterior",next:"Siguiente",last:"Ultima"},aria:{sortAscending:": active para ordenar la columna en orden ascendente",sortDescending:": active para ordenar la columna en orden descendente"}}})},o=function(e){r()(e).DataTable().destroy()}}}]);
//# sourceMappingURL=26.000b8671.chunk.js.map